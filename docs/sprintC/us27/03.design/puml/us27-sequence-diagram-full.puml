@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox
actor "Green Spaces Manager" as GSM
participant ":ListMyGreenSpacesUI" as UI
participant ":CreateGreenSpacesController" as controller
participant ":Repositories" as singleton
participant "repositories\n:Repositories" as rep
participant "authenticationRepository\n:AuthenticationRepository" as AUTH_REPO
participant "userSession\n:UserSession" as USR_SESSION
participant "greenSpacesRepository\n:greenSpacesRepository" as greenSpacesRepository
participant ":GreenSpace" as greenSpace

note right of GSM
    - The user is already logged in at this step.
    - Authentication sequence is explained in
    a sequence excerpt.
end note

note right of singleton
    - Singleton is
    in use
end note

activate GSM

        GSM -> UI : asks for a list of the green spaces managed by me

        activate UI

            UI -> controller** : create

            UI -> controller : asks for a list of the green spaces managed by me
            activate controller

                controller -> singleton : getInstance()
                activate singleton

                    singleton --> controller: repositories
                deactivate singleton

                controller -> singleton : getEmployeeFromSession()

                note right of controller
                    - This method is explained
                    in detail in an excerpt
                    sequence diagram.
                end note

                activate singleton

                singleton --> controller : employee

                deactivate singleton

                controller -> rep : getGreenSpacesRepository()
                activate rep

                    rep --> controller: greenSpacesRepository
                deactivate rep

                controller -> greenSpacesRepository : getGreenSpacesManaged()
                activate greenSpacesRepository

                ref over greenSpacesRepository : SortAlgoritm()

                    greenSpacesRepository --> controller : myGreenSpacesList
                deactivate greenSpacesRepository



                controller --> UI : myGreenSpacesList
            deactivate controller

            UI --> GSM : shows Green Spaces managed by me
        deactivate UI

deactivate GSM

@enduml
